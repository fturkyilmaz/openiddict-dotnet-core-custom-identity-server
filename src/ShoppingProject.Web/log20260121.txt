2026-01-21 15:55:08.811 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2026-01-21 15:55:08.837 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-21 15:55:08.840 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2026-01-21 15:55:08.841 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsLock" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK___EFMigrationsLock" PRIMARY KEY,
    "Timestamp" TEXT NOT NULL
);
2026-01-21 15:55:08.841 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2026-01-21 12:55:08.84169+00:00');
SELECT changes();
2026-01-21 15:55:08.865 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-01-21 15:55:08.868 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-01-21 15:55:08.869 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-21 15:55:08.873 +03:00 [INF] Applying migration '20231218143922_PhoneNumber'.
2026-01-21 15:55:08.876 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Contributors" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Contributors" PRIMARY KEY AUTOINCREMENT,
    "Name" TEXT NOT NULL,
    "Status" INTEGER NOT NULL,
    "PhoneNumber_CountryCode" TEXT NULL,
    "PhoneNumber_Number" TEXT NULL,
    "PhoneNumber_Extension" TEXT NULL
);
2026-01-21 15:55:08.876 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20231218143922_PhoneNumber', '10.0.1');
2026-01-21 15:55:08.876 +03:00 [INF] Applying migration '20251113164108_UpdateForNet10'.
2026-01-21 15:55:08.880 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20251113164108_UpdateForNet10', '10.0.1');
2026-01-21 15:55:08.880 +03:00 [INF] Applying migration '20260108133629_SyncModelChanges'.
2026-01-21 15:55:08.892 +03:00 [WRN] The migration operation 'PRAGMA foreign_keys = 0;
' from migration 'SyncModelChanges' cannot be executed in a transaction. If the app is terminated or an unrecoverable error occurs while this operation is being executed then the migration will be left in a partially applied state and would need to be reverted manually before it can be applied again. Create a separate migration that contains just this operation.
2026-01-21 15:55:08.893 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "OpenIddictApplications" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_OpenIddictApplications" PRIMARY KEY,
    "ApplicationType" TEXT NULL,
    "ClientId" TEXT NULL,
    "ClientSecret" TEXT NULL,
    "ClientType" TEXT NULL,
    "ConcurrencyToken" TEXT NULL,
    "ConsentType" TEXT NULL,
    "DisplayName" TEXT NULL,
    "DisplayNames" TEXT NULL,
    "JsonWebKeySet" TEXT NULL,
    "Permissions" TEXT NULL,
    "PostLogoutRedirectUris" TEXT NULL,
    "Properties" TEXT NULL,
    "RedirectUris" TEXT NULL,
    "Requirements" TEXT NULL,
    "Settings" TEXT NULL
);
2026-01-21 15:55:08.893 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "OpenIddictScopes" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_OpenIddictScopes" PRIMARY KEY,
    "ConcurrencyToken" TEXT NULL,
    "Description" TEXT NULL,
    "Descriptions" TEXT NULL,
    "DisplayName" TEXT NULL,
    "DisplayNames" TEXT NULL,
    "Name" TEXT NULL,
    "Properties" TEXT NULL,
    "Resources" TEXT NULL
);
2026-01-21 15:55:08.893 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "OpenIddictAuthorizations" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_OpenIddictAuthorizations" PRIMARY KEY,
    "ApplicationId" TEXT NULL,
    "ConcurrencyToken" TEXT NULL,
    "CreationDate" TEXT NULL,
    "Properties" TEXT NULL,
    "Scopes" TEXT NULL,
    "Status" TEXT NULL,
    "Subject" TEXT NULL,
    "Type" TEXT NULL,
    CONSTRAINT "FK_OpenIddictAuthorizations_OpenIddictApplications_ApplicationId" FOREIGN KEY ("ApplicationId") REFERENCES "OpenIddictApplications" ("Id")
);
2026-01-21 15:55:08.893 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "OpenIddictTokens" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_OpenIddictTokens" PRIMARY KEY,
    "ApplicationId" TEXT NULL,
    "AuthorizationId" TEXT NULL,
    "ConcurrencyToken" TEXT NULL,
    "CreationDate" TEXT NULL,
    "ExpirationDate" TEXT NULL,
    "Payload" TEXT NULL,
    "Properties" TEXT NULL,
    "RedemptionDate" TEXT NULL,
    "ReferenceId" TEXT NULL,
    "Status" TEXT NULL,
    "Subject" TEXT NULL,
    "Type" TEXT NULL,
    CONSTRAINT "FK_OpenIddictTokens_OpenIddictApplications_ApplicationId" FOREIGN KEY ("ApplicationId") REFERENCES "OpenIddictApplications" ("Id"),
    CONSTRAINT "FK_OpenIddictTokens_OpenIddictAuthorizations_AuthorizationId" FOREIGN KEY ("AuthorizationId") REFERENCES "OpenIddictAuthorizations" ("Id")
);
2026-01-21 15:55:08.893 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_OpenIddictApplications_ClientId" ON "OpenIddictApplications" ("ClientId");
2026-01-21 15:55:08.893 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OpenIddictAuthorizations_ApplicationId_Status_Subject_Type" ON "OpenIddictAuthorizations" ("ApplicationId", "Status", "Subject", "Type");
2026-01-21 15:55:08.893 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_OpenIddictScopes_Name" ON "OpenIddictScopes" ("Name");
2026-01-21 15:55:08.894 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OpenIddictTokens_ApplicationId_Status_Subject_Type" ON "OpenIddictTokens" ("ApplicationId", "Status", "Subject", "Type");
2026-01-21 15:55:08.894 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OpenIddictTokens_AuthorizationId" ON "OpenIddictTokens" ("AuthorizationId");
2026-01-21 15:55:08.894 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_OpenIddictTokens_ReferenceId" ON "OpenIddictTokens" ("ReferenceId");
2026-01-21 15:55:08.894 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Contributors" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Contributors" PRIMARY KEY,
    "Name" TEXT NOT NULL,
    "PhoneNumber_CountryCode" TEXT NULL,
    "PhoneNumber_Extension" TEXT NULL,
    "PhoneNumber_Number" TEXT NULL,
    "Status" INTEGER NOT NULL
);
2026-01-21 15:55:08.894 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Contributors" ("Id", "Name", "PhoneNumber_CountryCode", "PhoneNumber_Extension", "PhoneNumber_Number", "Status")
SELECT "Id", "Name", "PhoneNumber_CountryCode", "PhoneNumber_Extension", "PhoneNumber_Number", "Status"
FROM "Contributors";
2026-01-21 15:55:08.894 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2026-01-21 15:55:08.894 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Contributors";
2026-01-21 15:55:08.895 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Contributors" RENAME TO "Contributors";
2026-01-21 15:55:08.895 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2026-01-21 15:55:08.895 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260108133629_SyncModelChanges', '10.0.1');
2026-01-21 15:55:08.895 +03:00 [INF] Applying migration '20260108153510_UpdateBaseEntities'.
2026-01-21 15:55:08.906 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AuditLogs" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_AuditLogs" PRIMARY KEY,
    "UserId" TEXT NULL,
    "Action" TEXT NOT NULL,
    "ClientId" TEXT NULL,
    "Timestamp" TEXT NOT NULL,
    "IpAddress" TEXT NULL,
    "UserAgent" TEXT NULL
);
2026-01-21 15:55:08.906 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Clients" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Clients" PRIMARY KEY,
    "ClientId" TEXT NOT NULL,
    "ClientSecretHash" TEXT NOT NULL,
    "RedirectUrisJson" TEXT NOT NULL,
    "AllowedScopesJson" TEXT NOT NULL,
    "IsActive" INTEGER NOT NULL,
    "CreatedDate" TEXT NOT NULL,
    "UpdatedDate" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL
);
2026-01-21 15:55:08.906 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Keys" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Keys" PRIMARY KEY,
    "Kid" TEXT NOT NULL,
    "PublicKey" TEXT NOT NULL,
    "PrivateKey" TEXT NOT NULL,
    "Algorithm" TEXT NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "ExpiresAt" TEXT NOT NULL
);
2026-01-21 15:55:08.906 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Roles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Roles" PRIMARY KEY,
    "Name" TEXT NOT NULL,
    "Description" TEXT NOT NULL
);
2026-01-21 15:55:08.906 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Scopes" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Scopes" PRIMARY KEY,
    "Name" TEXT NOT NULL,
    "Description" TEXT NOT NULL
);
2026-01-21 15:55:08.906 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Tokens" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Tokens" PRIMARY KEY,
    "UserId" TEXT NOT NULL,
    "AccessToken" TEXT NOT NULL,
    "RefreshToken" TEXT NOT NULL,
    "ExpiresAt" TEXT NOT NULL,
    "RevokedAt" TEXT NULL
);
2026-01-21 15:55:08.906 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Users" PRIMARY KEY,
    "UserName" TEXT NOT NULL,
    "Email" TEXT NOT NULL,
    "PasswordHash" TEXT NOT NULL,
    "PasswordSalt" TEXT NOT NULL,
    "IsActive" INTEGER NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NOT NULL
);
2026-01-21 15:55:08.906 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ClientScopes" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_ClientScopes" PRIMARY KEY,
    "ClientId" TEXT NOT NULL,
    "ScopeId" TEXT NOT NULL,
    "CreatedDate" TEXT NOT NULL,
    "UpdatedDate" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL,
    CONSTRAINT "FK_ClientScopes_Clients_ClientId" FOREIGN KEY ("ClientId") REFERENCES "Clients" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_ClientScopes_Scopes_ScopeId" FOREIGN KEY ("ScopeId") REFERENCES "Scopes" ("Id") ON DELETE CASCADE
);
2026-01-21 15:55:08.907 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserClaims" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_UserClaims" PRIMARY KEY,
    "UserId" TEXT NOT NULL,
    "Type" TEXT NOT NULL,
    "Value" TEXT NOT NULL,
    "CreatedDate" TEXT NOT NULL,
    "UpdatedDate" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL,
    CONSTRAINT "FK_UserClaims_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2026-01-21 15:55:08.907 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserRoles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_UserRoles" PRIMARY KEY,
    "UserId" TEXT NOT NULL,
    "RoleId" TEXT NOT NULL,
    "CreatedDate" TEXT NOT NULL,
    "UpdatedDate" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL,
    CONSTRAINT "FK_UserRoles_Roles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "Roles" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_UserRoles_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2026-01-21 15:55:08.907 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_ClientScopes_ClientId" ON "ClientScopes" ("ClientId");
2026-01-21 15:55:08.907 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_ClientScopes_ScopeId" ON "ClientScopes" ("ScopeId");
2026-01-21 15:55:08.907 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_UserClaims_UserId" ON "UserClaims" ("UserId");
2026-01-21 15:55:08.907 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_UserRoles_RoleId" ON "UserRoles" ("RoleId");
2026-01-21 15:55:08.907 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_UserRoles_UserId" ON "UserRoles" ("UserId");
2026-01-21 15:55:08.907 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260108153510_UpdateBaseEntities', '10.0.1');
2026-01-21 15:55:08.907 +03:00 [INF] Applying migration '20260108184518_SyncAppDbContext'.
2026-01-21 15:55:08.914 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Users" ADD "DisplayName" TEXT NOT NULL DEFAULT '';
2026-01-21 15:55:08.914 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260108184518_SyncAppDbContext', '10.0.1');
2026-01-21 15:55:08.914 +03:00 [INF] Applying migration '20260108212048_UpdateAppDb'.
2026-01-21 15:55:08.920 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Users" ADD "CreatedDate" TEXT NOT NULL DEFAULT '0001-01-01 00:00:00';
2026-01-21 15:55:08.920 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Users" ADD "IsDeleted" INTEGER NOT NULL DEFAULT 0;
2026-01-21 15:55:08.921 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Users" ADD "UpdatedDate" TEXT NULL;
2026-01-21 15:55:08.921 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260108212048_UpdateAppDb', '10.0.1');
2026-01-21 15:55:08.921 +03:00 [INF] Applying migration '20260109140603_AutoMigration_20260109170600'.
2026-01-21 15:55:08.928 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Users" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Users" PRIMARY KEY,
    "CreatedAt" TEXT NOT NULL,
    "CreatedDate" TEXT NOT NULL,
    "DisplayName" TEXT NOT NULL,
    "Email" TEXT NOT NULL,
    "IsActive" INTEGER NOT NULL,
    "IsDeleted" INTEGER NOT NULL,
    "PasswordHash" TEXT NOT NULL,
    "UpdatedAt" TEXT NOT NULL,
    "UpdatedDate" TEXT NULL,
    "UserName" TEXT NOT NULL
);
2026-01-21 15:55:08.928 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Users" ("Id", "CreatedAt", "CreatedDate", "DisplayName", "Email", "IsActive", "IsDeleted", "PasswordHash", "UpdatedAt", "UpdatedDate", "UserName")
SELECT "Id", "CreatedAt", "CreatedDate", "DisplayName", "Email", "IsActive", "IsDeleted", "PasswordHash", "UpdatedAt", "UpdatedDate", "UserName"
FROM "Users";
2026-01-21 15:55:08.928 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2026-01-21 15:55:08.928 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Users";
2026-01-21 15:55:08.929 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Users" RENAME TO "Users";
2026-01-21 15:55:08.929 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2026-01-21 15:55:08.929 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260109140603_AutoMigration_20260109170600', '10.0.1');
2026-01-21 15:55:08.929 +03:00 [INF] Applying migration '20260110063107_AutoMigration_20260110093100'.
2026-01-21 15:55:08.937 +03:00 [WRN] The migration operation 'PRAGMA foreign_keys = 0;
' from migration 'AutoMigration_20260110093100' cannot be executed in a transaction. If the app is terminated or an unrecoverable error occurs while this operation is being executed then the migration will be left in a partially applied state and would need to be reverted manually before it can be applied again. Create a separate migration that contains just this operation.
2026-01-21 15:55:08.937 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Tokens";
2026-01-21 15:55:08.937 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Contributors" RENAME TO "Contributor";
2026-01-21 15:55:08.938 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ef_temp_Contributor" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Contributor" PRIMARY KEY,
    "Name" TEXT NOT NULL,
    "PhoneNumber_CountryCode" TEXT NULL,
    "PhoneNumber_Extension" TEXT NULL,
    "PhoneNumber_Number" TEXT NULL,
    "Status" INTEGER NOT NULL
);
2026-01-21 15:55:08.938 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ef_temp_Contributor" ("Id", "Name", "PhoneNumber_CountryCode", "PhoneNumber_Extension", "PhoneNumber_Number", "Status")
SELECT "Id", "Name", "PhoneNumber_CountryCode", "PhoneNumber_Extension", "PhoneNumber_Number", "Status"
FROM "Contributor";
2026-01-21 15:55:08.938 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 0;
2026-01-21 15:55:08.938 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE "Contributor";
2026-01-21 15:55:08.938 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "ef_temp_Contributor" RENAME TO "Contributor";
2026-01-21 15:55:08.939 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA foreign_keys = 1;
2026-01-21 15:55:08.939 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260110063107_AutoMigration_20260110093100', '10.0.1');
2026-01-21 15:55:08.939 +03:00 [INF] Applying migration '20260121121337_AddUserRoleRelations'.
2026-01-21 15:55:08.943 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260121121337_AddUserRoleRelations', '10.0.1');
2026-01-21 15:55:08.943 +03:00 [INF] Applying migration '20260121125500_InitialCreate'.
2026-01-21 15:55:08.948 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Roles" ADD "CreatedDate" TEXT NOT NULL DEFAULT '0001-01-01 00:00:00';
2026-01-21 15:55:08.948 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Roles" ADD "IsDeleted" INTEGER NOT NULL DEFAULT 0;
2026-01-21 15:55:08.948 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Roles" ADD "UpdatedDate" TEXT NULL;
2026-01-21 15:55:08.948 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20260121125500_InitialCreate', '10.0.1');
2026-01-21 15:55:08.949 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2026-01-21 15:56:22.030 +03:00 [INF] Applying database migrations...
2026-01-21 15:56:22.404 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-21 15:56:22.422 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2026-01-21 15:56:22.425 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2026-01-21 12:56:22.424585+00:00');
SELECT changes();
2026-01-21 15:56:22.449 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-01-21 15:56:22.454 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-01-21 15:56:22.456 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-21 15:56:22.459 +03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-21 15:56:22.460 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2026-01-21 15:56:22.461 +03:00 [INF] Database migrations applied successfully
2026-01-21 15:56:22.462 +03:00 [INF] Seeding database...
2026-01-21 15:56:22.560 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u")
2026-01-21 15:56:22.596 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clients" AS "c")
2026-01-21 15:56:22.602 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS "s")
2026-01-21 15:56:22.605 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS "r")
2026-01-21 15:56:22.656 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@name='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 15:56:22.666 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@name='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 15:56:22.695 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 28), @p2='?' (Size = 14), @p3='?' (Size = 10), @p4='?' (DbType = DateTime), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (Size = 38), @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Clients" ("Id", "AllowedScopesJson", "ClientId", "ClientSecretHash", "CreatedDate", "IsActive", "IsDeleted", "RedirectUrisJson", "UpdatedDate")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-21 15:56:22.696 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?', @p3='?', @p4='?' (Size = 10), @p5='?', @p6='?' (Size = 3), @p7='?', @p8='?' (Size = 21)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictScopes" ("Id", "ConcurrencyToken", "Description", "Descriptions", "DisplayName", "DisplayNames", "Name", "Properties", "Resources")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-21 15:56:22.696 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 41), @p3='?' (DbType = Boolean), @p4='?' (Size = 5), @p5='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Roles" ("Id", "CreatedDate", "Description", "IsDeleted", "Name", "UpdatedDate")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2026-01-21 15:56:22.696 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (Size = 44), @p3='?' (DbType = Boolean), @p4='?' (Size = 4), @p5='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Roles" ("Id", "CreatedDate", "Description", "IsDeleted", "Name", "UpdatedDate")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2026-01-21 15:56:22.696 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 12), @p2='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Scopes" ("Id", "Description", "Name")
VALUES (@p0, @p1, @p2);
2026-01-21 15:56:22.697 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 13), @p4='?' (Size = 14), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (Size = 69), @p8='?' (DbType = DateTime), @p9='?' (DbType = DateTime), @p10='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "CreatedAt", "CreatedDate", "DisplayName", "Email", "IsActive", "IsDeleted", "PasswordHash", "UpdatedAt", "UpdatedDate", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2026-01-21 15:56:22.707 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 14)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:56:22.718 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 14)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:56:22.732 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?', @p2='?' (Size = 14), @p3='?' (Size = 84), @p4='?' (Size = 12), @p5='?' (Size = 36), @p6='?', @p7='?' (Size = 21), @p8='?', @p9='?', @p10='?' (Size = 162), @p11='?', @p12='?', @p13='?' (Size = 38), @p14='?', @p15='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictApplications" ("Id", "ApplicationType", "ClientId", "ClientSecret", "ClientType", "ConcurrencyToken", "ConsentType", "DisplayName", "DisplayNames", "JsonWebKeySet", "Permissions", "PostLogoutRedirectUris", "Properties", "RedirectUris", "Requirements", "Settings")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-01-21 15:56:22.740 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id"
FROM "Roles" AS "r"
WHERE "r"."Name" = 'Admin'
LIMIT 1
2026-01-21 15:56:22.743 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@adminUserId='?' (DbType = Guid), @adminRoleId='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserRoles" AS "u"
    WHERE "u"."UserId" = @adminUserId AND "u"."RoleId" = @adminRoleId AND NOT ("u"."IsDeleted"))
2026-01-21 15:56:22.753 +03:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = Guid), @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserRoles" ("Id", "CreatedDate", "IsDeleted", "RoleId", "UpdatedDate", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2026-01-21 15:56:22.759 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'ShoppingProject.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-21 15:56:22.762 +03:00 [ERR] An error occurred seeding the DB. An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ShoppingProject.Infrastructure.Data.SeedData.InitializeAsync(IServiceProvider provider) in /Users/furkanturkyilmaz/Documents/openiddict-dotnet-core-custom-identity-server/src/ShoppingProject.Infrastructure/Data/SeedData.cs:line 112
   at ShoppingProject.Web.Configurations.MiddlewareConfig.SeedDatabaseAsync(WebApplication app) in /Users/furkanturkyilmaz/Documents/openiddict-dotnet-core-custom-identity-server/src/ShoppingProject.Web/Configurations/MiddlewareConfig.cs:line 71
2026-01-21 15:56:22.770 +03:00 [INF] User profile is available. Using '/Users/furkanturkyilmaz/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-21 15:56:23.032 +03:00 [INF] Now listening on: https://localhost:57679
2026-01-21 15:56:23.032 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-21 15:56:23.032 +03:00 [INF] Hosting environment: Development
2026-01-21 15:56:23.033 +03:00 [INF] Content root path: /Users/furkanturkyilmaz/Documents/openiddict-dotnet-core-custom-identity-server/src/ShoppingProject.Web
2026-01-21 15:56:54.294 +03:00 [INF] Application is shutting down...
2026-01-21 15:56:57.113 +03:00 [INF] Applying database migrations...
2026-01-21 15:56:57.447 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-21 15:56:57.462 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2026-01-21 15:56:57.466 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2026-01-21 12:56:57.465378+00:00');
SELECT changes();
2026-01-21 15:56:57.491 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-01-21 15:56:57.497 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-01-21 15:56:57.499 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-21 15:56:57.503 +03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-21 15:56:57.504 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2026-01-21 15:56:57.508 +03:00 [INF] Database migrations applied successfully
2026-01-21 15:56:57.517 +03:00 [INF] Seeding database...
2026-01-21 15:56:57.641 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u")
2026-01-21 15:56:57.659 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id"
FROM "Users" AS "u"
WHERE "u"."UserName" = 'admin'
LIMIT 1
2026-01-21 15:56:57.662 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clients" AS "c")
2026-01-21 15:56:57.664 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS "s")
2026-01-21 15:56:57.665 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS "r")
2026-01-21 15:56:57.692 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@name='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 15:56:57.720 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 14)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:56:57.732 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id"
FROM "Roles" AS "r"
WHERE "r"."Name" = 'Admin'
LIMIT 1
2026-01-21 15:56:57.734 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@adminUserId='?' (DbType = Guid), @adminRoleId='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserRoles" AS "u"
    WHERE "u"."UserId" = @adminUserId AND "u"."RoleId" = @adminRoleId AND NOT ("u"."IsDeleted"))
2026-01-21 15:56:57.773 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (DbType = Guid), @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "UserRoles" ("Id", "CreatedDate", "IsDeleted", "RoleId", "UpdatedDate", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2026-01-21 15:56:57.800 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@name='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 15:56:57.808 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@name='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 15:56:57.811 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?', @p3='?', @p4='?' (Size = 17), @p5='?', @p6='?' (Size = 9), @p7='?', @p8='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictScopes" ("Id", "ConcurrencyToken", "Description", "Descriptions", "DisplayName", "DisplayNames", "Name", "Properties", "Resources")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-21 15:56:57.811 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@name='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 15:56:57.812 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@name='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 15:56:57.812 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?', @p3='?', @p4='?' (Size = 14), @p5='?', @p6='?' (Size = 7), @p7='?', @p8='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictScopes" ("Id", "ConcurrencyToken", "Description", "Descriptions", "DisplayName", "DisplayNames", "Name", "Properties", "Resources")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-21 15:56:57.813 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:56:57.826 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:56:57.829 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?', @p2='?' (Size = 11), @p3='?' (Size = 84), @p4='?' (Size = 12), @p5='?' (Size = 36), @p6='?' (Size = 8), @p7='?' (Size = 9), @p8='?', @p9='?', @p10='?' (Size = 190), @p11='?', @p12='?', @p13='?' (Size = 55), @p14='?', @p15='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictApplications" ("Id", "ApplicationType", "ClientId", "ClientSecret", "ClientType", "ConcurrencyToken", "ConsentType", "DisplayName", "DisplayNames", "JsonWebKeySet", "Permissions", "PostLogoutRedirectUris", "Properties", "RedirectUris", "Requirements", "Settings")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-01-21 15:56:57.830 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:56:57.833 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:56:57.833 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?', @p2='?' (Size = 15), @p3='?' (Size = 84), @p4='?' (Size = 12), @p5='?' (Size = 36), @p6='?' (Size = 8), @p7='?' (Size = 13), @p8='?', @p9='?', @p10='?' (Size = 188), @p11='?', @p12='?', @p13='?' (Size = 38), @p14='?', @p15='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictApplications" ("Id", "ApplicationType", "ClientId", "ClientSecret", "ClientType", "ConcurrencyToken", "ConsentType", "DisplayName", "DisplayNames", "JsonWebKeySet", "Permissions", "PostLogoutRedirectUris", "Properties", "RedirectUris", "Requirements", "Settings")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2026-01-21 15:56:57.833 +03:00 [INF] Database seeded successfully
2026-01-21 15:56:57.840 +03:00 [INF] User profile is available. Using '/Users/furkanturkyilmaz/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-21 15:56:58.072 +03:00 [INF] Now listening on: https://localhost:57679
2026-01-21 15:56:58.073 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-21 15:56:58.073 +03:00 [INF] Hosting environment: Development
2026-01-21 15:56:58.073 +03:00 [INF] Content root path: /Users/furkanturkyilmaz/Documents/openiddict-dotnet-core-custom-identity-server/src/ShoppingProject.Web
2026-01-21 15:57:11.160 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:57679/api/v1/user-roles - null null
2026-01-21 15:57:11.243 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationId", "o"."AuthorizationId", "o"."ConcurrencyToken", "o"."CreationDate", "o"."ExpirationDate", "o"."Payload", "o"."Properties", "o"."RedemptionDate", "o"."ReferenceId", "o"."Status", "o"."Subject", "o"."Type", "o0"."Id", "o0"."ApplicationType", "o0"."ClientId", "o0"."ClientSecret", "o0"."ClientType", "o0"."ConcurrencyToken", "o0"."ConsentType", "o0"."DisplayName", "o0"."DisplayNames", "o0"."JsonWebKeySet", "o0"."Permissions", "o0"."PostLogoutRedirectUris", "o0"."Properties", "o0"."RedirectUris", "o0"."Requirements", "o0"."Settings", "o1"."Id", "o1"."ApplicationId", "o1"."ConcurrencyToken", "o1"."CreationDate", "o1"."Properties", "o1"."Scopes", "o1"."Status", "o1"."Subject", "o1"."Type"
FROM "OpenIddictTokens" AS "o"
LEFT JOIN "OpenIddictApplications" AS "o0" ON "o"."ApplicationId" = "o0"."Id"
LEFT JOIN "OpenIddictAuthorizations" AS "o1" ON "o"."AuthorizationId" = "o1"."Id"
WHERE "o"."ReferenceId" = @identifier
LIMIT 1
2026-01-21 15:57:11.249 +03:00 [INF] OpenIddict.Validation.AspNetCore was not authenticated. Failure message: An error occurred while authenticating the current request.
2026-01-21 15:57:11.251 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2026-01-21 15:57:11.256 +03:00 [INF] The response was successfully returned as a challenge response: {
  "error": "invalid_token",
  "error_description": "The specified token is invalid.",
  "error_uri": "https://documentation.openiddict.com/errors/ID2004"
}.
2026-01-21 15:57:11.256 +03:00 [INF] AuthenticationScheme: OpenIddict.Validation.AspNetCore was challenged.
2026-01-21 15:57:11.259 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:57679/api/v1/user-roles - 401 0 null 100.6397ms
2026-01-21 15:57:13.342 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/connect/token - application/x-www-form-urlencoded 165
2026-01-21 15:57:13.346 +03:00 [INF] The request URI matched a server endpoint: "Token".
2026-01-21 15:57:13.355 +03:00 [INF] The token request was successfully extracted: {
  "grant_type": "password",
  "username": "admin@test.com",
  "password": "[redacted]",
  "client_id": "shopping-admin",
  "client_secret": "[redacted]",
  "scope": "api openid profile offline_access"
}.
2026-01-21 15:57:13.391 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @p1
2026-01-21 15:57:13.398 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 14)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:57:13.409 +03:00 [INF] The token request was successfully validated.
2026-01-21 15:57:13.416 +03:00 [INF] Handling LoginCommand
2026-01-21 15:57:13.417 +03:00 [INF] Property Email : admin@test.com
2026-01-21 15:57:13.417 +03:00 [INF] Property Password : Password123!
2026-01-21 15:57:13.425 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@email='?' (Size = 14)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."CreatedDate", "u"."DisplayName", "u"."Email", "u"."IsActive", "u"."IsDeleted", "u"."PasswordHash", "u"."UpdatedAt", "u"."UpdatedDate", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Email" = @email
LIMIT 1
2026-01-21 15:57:13.437 +03:00 [INF] Handled LoginCommand with LoginResultDto { UserId = b4b209ef-5e37-4cae-adab-37aa222297fa, UserName = admin, Email = admin@test.com, Roles = System.Collections.Generic.List`1[System.String] } in 19 ms
2026-01-21 15:57:13.438 +03:00 [INF] Login result: {"UserId":"b4b209ef-5e37-4cae-adab-37aa222297fa","UserName":"admin","Email":"admin@test.com","Roles":[],"$type":"LoginResultDto"}
2026-01-21 15:57:13.439 +03:00 [INF] User admin logged in with roles: 
2026-01-21 15:57:13.470 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?' (Size = 36), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 51), @p6='?' (Size = 5), @p7='?' (Size = 36), @p8='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictAuthorizations" ("Id", "ApplicationId", "ConcurrencyToken", "CreationDate", "Properties", "Scopes", "Status", "Subject", "Type")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-21 15:57:13.472 +03:00 [INF] An ad hoc authorization was automatically created and associated with the 'shopping-admin' application: 13385ea7-9857-42a6-952d-6ef5f910648c.
2026-01-21 15:57:13.494 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?' (Size = 36), @p3='?' (Size = 36), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (Size = 5), @p11='?' (Size = 36), @p12='?' (Size = 45)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictTokens" ("Id", "ApplicationId", "AuthorizationId", "ConcurrencyToken", "CreationDate", "ExpirationDate", "Payload", "Properties", "RedemptionDate", "ReferenceId", "Status", "Subject", "Type")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2026-01-21 15:57:13.543 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p12='?' (Size = 36), @p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?' (Size = 36), @p13='?' (Size = 36), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 1974), @p6='?', @p7='?' (DbType = DateTime), @p8='?' (Size = 44), @p9='?' (Size = 5), @p10='?' (Size = 36), @p11='?' (Size = 45)], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictTokens" SET "ApplicationId" = @p0, "AuthorizationId" = @p1, "ConcurrencyToken" = @p2, "CreationDate" = @p3, "ExpirationDate" = @p4, "Payload" = @p5, "Properties" = @p6, "RedemptionDate" = @p7, "ReferenceId" = @p8, "Status" = @p9, "Subject" = @p10, "Type" = @p11
WHERE "Id" = @p12 AND "ConcurrencyToken" = @p13
RETURNING 1;
2026-01-21 15:57:13.545 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?' (Size = 36), @p3='?' (Size = 36), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (Size = 5), @p11='?' (Size = 36), @p12='?' (Size = 46)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictTokens" ("Id", "ApplicationId", "AuthorizationId", "ConcurrencyToken", "CreationDate", "ExpirationDate", "Payload", "Properties", "RedemptionDate", "ReferenceId", "Status", "Subject", "Type")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2026-01-21 15:57:13.570 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?' (Size = 36), @p3='?' (Size = 36), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (Size = 5), @p11='?' (Size = 36), @p12='?' (Size = 41)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictTokens" ("Id", "ApplicationId", "AuthorizationId", "ConcurrencyToken", "CreationDate", "ExpirationDate", "Payload", "Properties", "RedemptionDate", "ReferenceId", "Status", "Subject", "Type")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2026-01-21 15:57:13.587 +03:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599,
  "scope": "openid email profile offline_access api",
  "id_token": "[redacted]",
  "refresh_token": "[redacted]"
}.
2026-01-21 15:57:13.588 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/connect/token - 200 3260 application/json;charset=UTF-8 245.7019ms
2026-01-21 15:57:15.830 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:57679/api/v1/user-roles - null null
2026-01-21 15:57:15.843 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationId", "o"."AuthorizationId", "o"."ConcurrencyToken", "o"."CreationDate", "o"."ExpirationDate", "o"."Payload", "o"."Properties", "o"."RedemptionDate", "o"."ReferenceId", "o"."Status", "o"."Subject", "o"."Type", "o0"."Id", "o0"."ApplicationType", "o0"."ClientId", "o0"."ClientSecret", "o0"."ClientType", "o0"."ConcurrencyToken", "o0"."ConsentType", "o0"."DisplayName", "o0"."DisplayNames", "o0"."JsonWebKeySet", "o0"."Permissions", "o0"."PostLogoutRedirectUris", "o0"."Properties", "o0"."RedirectUris", "o0"."Requirements", "o0"."Settings", "o1"."Id", "o1"."ApplicationId", "o1"."ConcurrencyToken", "o1"."CreationDate", "o1"."Properties", "o1"."Scopes", "o1"."Status", "o1"."Subject", "o1"."Type"
FROM "OpenIddictTokens" AS "o"
LEFT JOIN "OpenIddictApplications" AS "o0" ON "o"."ApplicationId" = "o0"."Id"
LEFT JOIN "OpenIddictAuthorizations" AS "o1" ON "o"."AuthorizationId" = "o1"."Id"
WHERE "o"."ReferenceId" = @identifier
LIMIT 1
2026-01-21 15:57:15.905 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2026-01-21 15:57:15.906 +03:00 [INF] The response was successfully returned as a challenge response: {
  "error": "insufficient_access",
  "error_description": "The user represented by the token is not allowed to perform the requested action.",
  "error_uri": "https://documentation.openiddict.com/errors/ID2095"
}.
2026-01-21 15:57:15.906 +03:00 [INF] AuthenticationScheme: OpenIddict.Validation.AspNetCore was forbidden.
2026-01-21 15:57:15.906 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:57679/api/v1/user-roles - 403 0 null 76.5196ms
2026-01-21 15:57:16.731 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:57679/api/v1/user-roles - null null
2026-01-21 15:57:16.740 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationId", "o"."AuthorizationId", "o"."ConcurrencyToken", "o"."CreationDate", "o"."ExpirationDate", "o"."Payload", "o"."Properties", "o"."RedemptionDate", "o"."ReferenceId", "o"."Status", "o"."Subject", "o"."Type", "o0"."Id", "o0"."ApplicationType", "o0"."ClientId", "o0"."ClientSecret", "o0"."ClientType", "o0"."ConcurrencyToken", "o0"."ConsentType", "o0"."DisplayName", "o0"."DisplayNames", "o0"."JsonWebKeySet", "o0"."Permissions", "o0"."PostLogoutRedirectUris", "o0"."Properties", "o0"."RedirectUris", "o0"."Requirements", "o0"."Settings", "o1"."Id", "o1"."ApplicationId", "o1"."ConcurrencyToken", "o1"."CreationDate", "o1"."Properties", "o1"."Scopes", "o1"."Status", "o1"."Subject", "o1"."Type"
FROM "OpenIddictTokens" AS "o"
LEFT JOIN "OpenIddictApplications" AS "o0" ON "o"."ApplicationId" = "o0"."Id"
LEFT JOIN "OpenIddictAuthorizations" AS "o1" ON "o"."AuthorizationId" = "o1"."Id"
WHERE "o"."ReferenceId" = @identifier
LIMIT 1
2026-01-21 15:57:16.763 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2026-01-21 15:57:16.764 +03:00 [INF] The response was successfully returned as a challenge response: {
  "error": "insufficient_access",
  "error_description": "The user represented by the token is not allowed to perform the requested action.",
  "error_uri": "https://documentation.openiddict.com/errors/ID2095"
}.
2026-01-21 15:57:16.764 +03:00 [INF] AuthenticationScheme: OpenIddict.Validation.AspNetCore was forbidden.
2026-01-21 15:57:16.764 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:57679/api/v1/user-roles - 403 0 null 33.8462ms
2026-01-21 15:58:28.503 +03:00 [INF] Application is shutting down...
2026-01-21 15:58:33.244 +03:00 [INF] Applying database migrations...
2026-01-21 15:58:33.590 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-21 15:58:33.605 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2026-01-21 15:58:33.609 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2026-01-21 12:58:33.607979+00:00');
SELECT changes();
2026-01-21 15:58:33.633 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-01-21 15:58:33.638 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-01-21 15:58:33.640 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-21 15:58:33.643 +03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-21 15:58:33.643 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2026-01-21 15:58:33.645 +03:00 [INF] Database migrations applied successfully
2026-01-21 15:58:33.646 +03:00 [INF] Seeding database...
2026-01-21 15:58:33.743 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u")
2026-01-21 15:58:33.761 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id"
FROM "Users" AS "u"
WHERE "u"."UserName" = 'admin'
LIMIT 1
2026-01-21 15:58:33.764 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clients" AS "c")
2026-01-21 15:58:33.766 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS "s")
2026-01-21 15:58:33.767 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS "r")
2026-01-21 15:58:33.794 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@name='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 15:58:33.822 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 14)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:58:33.834 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id"
FROM "Roles" AS "r"
WHERE "r"."Name" = 'Admin'
LIMIT 1
2026-01-21 15:58:33.837 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@adminUserId='?' (DbType = Guid), @adminRoleId='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserRoles" AS "u"
    WHERE "u"."UserId" = @adminUserId AND "u"."RoleId" = @adminRoleId AND NOT ("u"."IsDeleted"))
2026-01-21 15:58:33.870 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@name='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 15:58:33.896 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p8='?' (Size = 36), @p0='?' (Size = 36), @p9='?' (Size = 36), @p1='?', @p2='?', @p3='?' (Size = 17), @p4='?', @p5='?' (Size = 9), @p6='?', @p7='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictScopes" SET "ConcurrencyToken" = @p0, "Description" = @p1, "Descriptions" = @p2, "DisplayName" = @p3, "DisplayNames" = @p4, "Name" = @p5, "Properties" = @p6, "Resources" = @p7
WHERE "Id" = @p8 AND "ConcurrencyToken" = @p9
RETURNING 1;
2026-01-21 15:58:33.898 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@name='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 15:58:33.899 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p8='?' (Size = 36), @p0='?' (Size = 36), @p9='?' (Size = 36), @p1='?', @p2='?', @p3='?' (Size = 14), @p4='?', @p5='?' (Size = 7), @p6='?', @p7='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictScopes" SET "ConcurrencyToken" = @p0, "Description" = @p1, "Descriptions" = @p2, "DisplayName" = @p3, "DisplayNames" = @p4, "Name" = @p5, "Properties" = @p6, "Resources" = @p7
WHERE "Id" = @p8 AND "ConcurrencyToken" = @p9
RETURNING 1;
2026-01-21 15:58:33.901 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:58:33.914 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p15='?' (Size = 36), @p0='?', @p1='?' (Size = 11), @p2='?' (Size = 84), @p3='?' (Size = 12), @p4='?' (Size = 36), @p16='?' (Size = 36), @p5='?' (Size = 8), @p6='?' (Size = 9), @p7='?', @p8='?', @p9='?' (Size = 190), @p10='?', @p11='?', @p12='?' (Size = 55), @p13='?', @p14='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictApplications" SET "ApplicationType" = @p0, "ClientId" = @p1, "ClientSecret" = @p2, "ClientType" = @p3, "ConcurrencyToken" = @p4, "ConsentType" = @p5, "DisplayName" = @p6, "DisplayNames" = @p7, "JsonWebKeySet" = @p8, "Permissions" = @p9, "PostLogoutRedirectUris" = @p10, "Properties" = @p11, "RedirectUris" = @p12, "Requirements" = @p13, "Settings" = @p14
WHERE "Id" = @p15 AND "ConcurrencyToken" = @p16
RETURNING 1;
2026-01-21 15:58:33.915 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:58:33.917 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p15='?' (Size = 36), @p0='?', @p1='?' (Size = 15), @p2='?' (Size = 84), @p3='?' (Size = 12), @p4='?' (Size = 36), @p16='?' (Size = 36), @p5='?' (Size = 8), @p6='?' (Size = 13), @p7='?', @p8='?', @p9='?' (Size = 188), @p10='?', @p11='?', @p12='?' (Size = 38), @p13='?', @p14='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictApplications" SET "ApplicationType" = @p0, "ClientId" = @p1, "ClientSecret" = @p2, "ClientType" = @p3, "ConcurrencyToken" = @p4, "ConsentType" = @p5, "DisplayName" = @p6, "DisplayNames" = @p7, "JsonWebKeySet" = @p8, "Permissions" = @p9, "PostLogoutRedirectUris" = @p10, "Properties" = @p11, "RedirectUris" = @p12, "Requirements" = @p13, "Settings" = @p14
WHERE "Id" = @p15 AND "ConcurrencyToken" = @p16
RETURNING 1;
2026-01-21 15:58:33.917 +03:00 [INF] Database seeded successfully
2026-01-21 15:58:33.923 +03:00 [INF] User profile is available. Using '/Users/furkanturkyilmaz/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-21 15:58:34.155 +03:00 [INF] Now listening on: https://localhost:57679
2026-01-21 15:58:34.155 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-21 15:58:34.155 +03:00 [INF] Hosting environment: Development
2026-01-21 15:58:34.155 +03:00 [INF] Content root path: /Users/furkanturkyilmaz/Documents/openiddict-dotnet-core-custom-identity-server/src/ShoppingProject.Web
2026-01-21 15:58:45.223 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:57679/api/v1/user-roles - null null
2026-01-21 15:58:45.311 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationId", "o"."AuthorizationId", "o"."ConcurrencyToken", "o"."CreationDate", "o"."ExpirationDate", "o"."Payload", "o"."Properties", "o"."RedemptionDate", "o"."ReferenceId", "o"."Status", "o"."Subject", "o"."Type", "o0"."Id", "o0"."ApplicationType", "o0"."ClientId", "o0"."ClientSecret", "o0"."ClientType", "o0"."ConcurrencyToken", "o0"."ConsentType", "o0"."DisplayName", "o0"."DisplayNames", "o0"."JsonWebKeySet", "o0"."Permissions", "o0"."PostLogoutRedirectUris", "o0"."Properties", "o0"."RedirectUris", "o0"."Requirements", "o0"."Settings", "o1"."Id", "o1"."ApplicationId", "o1"."ConcurrencyToken", "o1"."CreationDate", "o1"."Properties", "o1"."Scopes", "o1"."Status", "o1"."Subject", "o1"."Type"
FROM "OpenIddictTokens" AS "o"
LEFT JOIN "OpenIddictApplications" AS "o0" ON "o"."ApplicationId" = "o0"."Id"
LEFT JOIN "OpenIddictAuthorizations" AS "o1" ON "o"."AuthorizationId" = "o1"."Id"
WHERE "o"."ReferenceId" = @identifier
LIMIT 1
2026-01-21 15:58:45.393 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2026-01-21 15:58:45.398 +03:00 [INF] The response was successfully returned as a challenge response: {
  "error": "insufficient_access",
  "error_description": "The user represented by the token is not allowed to perform the requested action.",
  "error_uri": "https://documentation.openiddict.com/errors/ID2095"
}.
2026-01-21 15:58:45.399 +03:00 [INF] AuthenticationScheme: OpenIddict.Validation.AspNetCore was forbidden.
2026-01-21 15:58:45.403 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:57679/api/v1/user-roles - 403 0 null 181.4299ms
2026-01-21 15:58:48.347 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/connect/token - application/x-www-form-urlencoded 165
2026-01-21 15:58:48.350 +03:00 [INF] The request URI matched a server endpoint: "Token".
2026-01-21 15:58:48.361 +03:00 [INF] The token request was successfully extracted: {
  "grant_type": "password",
  "username": "admin@test.com",
  "password": "[redacted]",
  "client_id": "shopping-admin",
  "client_secret": "[redacted]",
  "scope": "api openid profile offline_access"
}.
2026-01-21 15:58:48.404 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @p1
2026-01-21 15:58:48.411 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 14)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:58:48.422 +03:00 [INF] The token request was successfully validated.
2026-01-21 15:58:48.429 +03:00 [INF] Handling LoginCommand
2026-01-21 15:58:48.429 +03:00 [INF] Property Email : admin@test.com
2026-01-21 15:58:48.429 +03:00 [INF] Property Password : Password123!
2026-01-21 15:58:48.436 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@email='?' (Size = 14)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."CreatedDate", "u"."DisplayName", "u"."Email", "u"."IsActive", "u"."IsDeleted", "u"."PasswordHash", "u"."UpdatedAt", "u"."UpdatedDate", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Email" = @email
LIMIT 1
2026-01-21 15:58:48.449 +03:00 [INF] Handled LoginCommand with LoginResultDto { UserId = b4b209ef-5e37-4cae-adab-37aa222297fa, UserName = admin, Email = admin@test.com, Roles = System.Collections.Generic.List`1[System.String] } in 20 ms
2026-01-21 15:58:48.450 +03:00 [INF] Login result: {"UserId":"b4b209ef-5e37-4cae-adab-37aa222297fa","UserName":"admin","Email":"admin@test.com","Roles":[],"$type":"LoginResultDto"}
2026-01-21 15:58:48.452 +03:00 [INF] User admin logged in with roles: 
2026-01-21 15:58:48.480 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?' (Size = 36), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 51), @p6='?' (Size = 5), @p7='?' (Size = 36), @p8='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictAuthorizations" ("Id", "ApplicationId", "ConcurrencyToken", "CreationDate", "Properties", "Scopes", "Status", "Subject", "Type")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-21 15:58:48.482 +03:00 [INF] An ad hoc authorization was automatically created and associated with the 'shopping-admin' application: 1524000c-2c09-47ed-a821-773a858aa078.
2026-01-21 15:58:48.499 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?' (Size = 36), @p3='?' (Size = 36), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (Size = 5), @p11='?' (Size = 36), @p12='?' (Size = 45)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictTokens" ("Id", "ApplicationId", "AuthorizationId", "ConcurrencyToken", "CreationDate", "ExpirationDate", "Payload", "Properties", "RedemptionDate", "ReferenceId", "Status", "Subject", "Type")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2026-01-21 15:58:48.537 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p12='?' (Size = 36), @p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?' (Size = 36), @p13='?' (Size = 36), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 1974), @p6='?', @p7='?' (DbType = DateTime), @p8='?' (Size = 44), @p9='?' (Size = 5), @p10='?' (Size = 36), @p11='?' (Size = 45)], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictTokens" SET "ApplicationId" = @p0, "AuthorizationId" = @p1, "ConcurrencyToken" = @p2, "CreationDate" = @p3, "ExpirationDate" = @p4, "Payload" = @p5, "Properties" = @p6, "RedemptionDate" = @p7, "ReferenceId" = @p8, "Status" = @p9, "Subject" = @p10, "Type" = @p11
WHERE "Id" = @p12 AND "ConcurrencyToken" = @p13
RETURNING 1;
2026-01-21 15:58:48.539 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?' (Size = 36), @p3='?' (Size = 36), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (Size = 5), @p11='?' (Size = 36), @p12='?' (Size = 46)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictTokens" ("Id", "ApplicationId", "AuthorizationId", "ConcurrencyToken", "CreationDate", "ExpirationDate", "Payload", "Properties", "RedemptionDate", "ReferenceId", "Status", "Subject", "Type")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2026-01-21 15:58:48.564 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?' (Size = 36), @p3='?' (Size = 36), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (Size = 5), @p11='?' (Size = 36), @p12='?' (Size = 41)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictTokens" ("Id", "ApplicationId", "AuthorizationId", "ConcurrencyToken", "CreationDate", "ExpirationDate", "Payload", "Properties", "RedemptionDate", "ReferenceId", "Status", "Subject", "Type")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2026-01-21 15:58:48.581 +03:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3599,
  "scope": "openid email profile offline_access api",
  "id_token": "[redacted]",
  "refresh_token": "[redacted]"
}.
2026-01-21 15:58:48.582 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/connect/token - 200 3260 application/json;charset=UTF-8 234.8924ms
2026-01-21 15:58:51.604 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:57679/api/v1/user-roles - null null
2026-01-21 15:58:51.617 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationId", "o"."AuthorizationId", "o"."ConcurrencyToken", "o"."CreationDate", "o"."ExpirationDate", "o"."Payload", "o"."Properties", "o"."RedemptionDate", "o"."ReferenceId", "o"."Status", "o"."Subject", "o"."Type", "o0"."Id", "o0"."ApplicationType", "o0"."ClientId", "o0"."ClientSecret", "o0"."ClientType", "o0"."ConcurrencyToken", "o0"."ConsentType", "o0"."DisplayName", "o0"."DisplayNames", "o0"."JsonWebKeySet", "o0"."Permissions", "o0"."PostLogoutRedirectUris", "o0"."Properties", "o0"."RedirectUris", "o0"."Requirements", "o0"."Settings", "o1"."Id", "o1"."ApplicationId", "o1"."ConcurrencyToken", "o1"."CreationDate", "o1"."Properties", "o1"."Scopes", "o1"."Status", "o1"."Subject", "o1"."Type"
FROM "OpenIddictTokens" AS "o"
LEFT JOIN "OpenIddictApplications" AS "o0" ON "o"."ApplicationId" = "o0"."Id"
LEFT JOIN "OpenIddictAuthorizations" AS "o1" ON "o"."AuthorizationId" = "o1"."Id"
WHERE "o"."ReferenceId" = @identifier
LIMIT 1
2026-01-21 15:58:51.643 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2026-01-21 15:58:51.644 +03:00 [INF] The response was successfully returned as a challenge response: {
  "error": "insufficient_access",
  "error_description": "The user represented by the token is not allowed to perform the requested action.",
  "error_uri": "https://documentation.openiddict.com/errors/ID2095"
}.
2026-01-21 15:58:51.644 +03:00 [INF] AuthenticationScheme: OpenIddict.Validation.AspNetCore was forbidden.
2026-01-21 15:58:51.645 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:57679/api/v1/user-roles - 403 0 null 40.5331ms
2026-01-21 15:59:25.841 +03:00 [INF] Application is shutting down...
2026-01-21 15:59:22.600 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-21 15:59:22.617 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2026-01-21 15:59:22.622 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2026-01-21 12:59:22.620531+00:00');
SELECT changes();
2026-01-21 15:59:22.647 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-01-21 15:59:22.653 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-01-21 15:59:22.656 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-21 15:59:22.660 +03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-21 15:59:22.661 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2026-01-21 15:59:22.663 +03:00 [INF] Database migrations applied successfully
2026-01-21 15:59:22.665 +03:00 [INF] Seeding database...
2026-01-21 15:59:22.774 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u")
2026-01-21 15:59:22.794 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id"
FROM "Users" AS "u"
WHERE "u"."UserName" = 'admin'
LIMIT 1
2026-01-21 15:59:22.798 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clients" AS "c")
2026-01-21 15:59:22.800 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS "s")
2026-01-21 15:59:22.802 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS "r")
2026-01-21 15:59:22.835 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@name='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 15:59:22.868 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@identifier='?' (Size = 14)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:59:22.881 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id"
FROM "Roles" AS "r"
WHERE "r"."Name" = 'Admin'
LIMIT 1
2026-01-21 15:59:22.884 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@adminUserId='?' (DbType = Guid), @adminRoleId='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserRoles" AS "u"
    WHERE "u"."UserId" = @adminUserId AND "u"."RoleId" = @adminRoleId AND NOT ("u"."IsDeleted"))
2026-01-21 15:59:22.916 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@name='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 15:59:22.947 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p8='?' (Size = 36), @p0='?' (Size = 36), @p9='?' (Size = 36), @p1='?', @p2='?', @p3='?' (Size = 17), @p4='?', @p5='?' (Size = 9), @p6='?', @p7='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictScopes" SET "ConcurrencyToken" = @p0, "Description" = @p1, "Descriptions" = @p2, "DisplayName" = @p3, "DisplayNames" = @p4, "Name" = @p5, "Properties" = @p6, "Resources" = @p7
WHERE "Id" = @p8 AND "ConcurrencyToken" = @p9
RETURNING 1;
2026-01-21 15:59:22.950 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@name='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 15:59:22.951 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p8='?' (Size = 36), @p0='?' (Size = 36), @p9='?' (Size = 36), @p1='?', @p2='?', @p3='?' (Size = 14), @p4='?', @p5='?' (Size = 7), @p6='?', @p7='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictScopes" SET "ConcurrencyToken" = @p0, "Description" = @p1, "Descriptions" = @p2, "DisplayName" = @p3, "DisplayNames" = @p4, "Name" = @p5, "Properties" = @p6, "Resources" = @p7
WHERE "Id" = @p8 AND "ConcurrencyToken" = @p9
RETURNING 1;
2026-01-21 15:59:22.953 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:59:22.968 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p15='?' (Size = 36), @p0='?', @p1='?' (Size = 11), @p2='?' (Size = 84), @p3='?' (Size = 12), @p4='?' (Size = 36), @p16='?' (Size = 36), @p5='?' (Size = 8), @p6='?' (Size = 9), @p7='?', @p8='?', @p9='?' (Size = 190), @p10='?', @p11='?', @p12='?' (Size = 55), @p13='?', @p14='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictApplications" SET "ApplicationType" = @p0, "ClientId" = @p1, "ClientSecret" = @p2, "ClientType" = @p3, "ConcurrencyToken" = @p4, "ConsentType" = @p5, "DisplayName" = @p6, "DisplayNames" = @p7, "JsonWebKeySet" = @p8, "Permissions" = @p9, "PostLogoutRedirectUris" = @p10, "Properties" = @p11, "RedirectUris" = @p12, "Requirements" = @p13, "Settings" = @p14
WHERE "Id" = @p15 AND "ConcurrencyToken" = @p16
RETURNING 1;
2026-01-21 15:59:22.971 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:59:22.974 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p15='?' (Size = 36), @p0='?', @p1='?' (Size = 15), @p2='?' (Size = 84), @p3='?' (Size = 12), @p4='?' (Size = 36), @p16='?' (Size = 36), @p5='?' (Size = 8), @p6='?' (Size = 13), @p7='?', @p8='?', @p9='?' (Size = 188), @p10='?', @p11='?', @p12='?' (Size = 38), @p13='?', @p14='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictApplications" SET "ApplicationType" = @p0, "ClientId" = @p1, "ClientSecret" = @p2, "ClientType" = @p3, "ConcurrencyToken" = @p4, "ConsentType" = @p5, "DisplayName" = @p6, "DisplayNames" = @p7, "JsonWebKeySet" = @p8, "Permissions" = @p9, "PostLogoutRedirectUris" = @p10, "Properties" = @p11, "RedirectUris" = @p12, "Requirements" = @p13, "Settings" = @p14
WHERE "Id" = @p15 AND "ConcurrencyToken" = @p16
RETURNING 1;
2026-01-21 15:59:22.974 +03:00 [INF] Database seeded successfully
2026-01-21 15:59:22.987 +03:00 [INF] User profile is available. Using '/Users/furkanturkyilmaz/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-21 15:59:23.270 +03:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address https://127.0.0.1:57679: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Address already in use
 ---> System.Net.Sockets.SocketException (48): Address already in use
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2026-01-21 15:59:28.877 +03:00 [INF] Applying database migrations...
2026-01-21 15:59:29.264 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-21 15:59:29.280 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2026-01-21 15:59:29.284 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2026-01-21 12:59:29.283007+00:00');
SELECT changes();
2026-01-21 15:59:29.309 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-01-21 15:59:29.315 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-01-21 15:59:29.317 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-21 15:59:29.321 +03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-21 15:59:29.323 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2026-01-21 15:59:29.324 +03:00 [INF] Database migrations applied successfully
2026-01-21 15:59:29.326 +03:00 [INF] Seeding database...
2026-01-21 15:59:29.431 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u")
2026-01-21 15:59:29.450 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id"
FROM "Users" AS "u"
WHERE "u"."UserName" = 'admin'
LIMIT 1
2026-01-21 15:59:29.454 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clients" AS "c")
2026-01-21 15:59:29.457 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS "s")
2026-01-21 15:59:29.458 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS "r")
2026-01-21 15:59:29.490 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@name='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 15:59:29.520 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 14)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:59:29.532 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id"
FROM "Roles" AS "r"
WHERE "r"."Name" = 'Admin'
LIMIT 1
2026-01-21 15:59:29.536 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@adminUserId='?' (DbType = Guid), @adminRoleId='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserRoles" AS "u"
    WHERE "u"."UserId" = @adminUserId AND "u"."RoleId" = @adminRoleId AND NOT ("u"."IsDeleted"))
2026-01-21 15:59:29.567 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@name='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 15:59:29.596 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p8='?' (Size = 36), @p0='?' (Size = 36), @p9='?' (Size = 36), @p1='?', @p2='?', @p3='?' (Size = 17), @p4='?', @p5='?' (Size = 9), @p6='?', @p7='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictScopes" SET "ConcurrencyToken" = @p0, "Description" = @p1, "Descriptions" = @p2, "DisplayName" = @p3, "DisplayNames" = @p4, "Name" = @p5, "Properties" = @p6, "Resources" = @p7
WHERE "Id" = @p8 AND "ConcurrencyToken" = @p9
RETURNING 1;
2026-01-21 15:59:29.600 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@name='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 15:59:29.601 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p8='?' (Size = 36), @p0='?' (Size = 36), @p9='?' (Size = 36), @p1='?', @p2='?', @p3='?' (Size = 14), @p4='?', @p5='?' (Size = 7), @p6='?', @p7='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictScopes" SET "ConcurrencyToken" = @p0, "Description" = @p1, "Descriptions" = @p2, "DisplayName" = @p3, "DisplayNames" = @p4, "Name" = @p5, "Properties" = @p6, "Resources" = @p7
WHERE "Id" = @p8 AND "ConcurrencyToken" = @p9
RETURNING 1;
2026-01-21 15:59:29.604 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:59:29.619 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p15='?' (Size = 36), @p0='?', @p1='?' (Size = 11), @p2='?' (Size = 84), @p3='?' (Size = 12), @p4='?' (Size = 36), @p16='?' (Size = 36), @p5='?' (Size = 8), @p6='?' (Size = 9), @p7='?', @p8='?', @p9='?' (Size = 190), @p10='?', @p11='?', @p12='?' (Size = 55), @p13='?', @p14='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictApplications" SET "ApplicationType" = @p0, "ClientId" = @p1, "ClientSecret" = @p2, "ClientType" = @p3, "ConcurrencyToken" = @p4, "ConsentType" = @p5, "DisplayName" = @p6, "DisplayNames" = @p7, "JsonWebKeySet" = @p8, "Permissions" = @p9, "PostLogoutRedirectUris" = @p10, "Properties" = @p11, "RedirectUris" = @p12, "Requirements" = @p13, "Settings" = @p14
WHERE "Id" = @p15 AND "ConcurrencyToken" = @p16
RETURNING 1;
2026-01-21 15:59:29.621 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:59:29.624 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p15='?' (Size = 36), @p0='?', @p1='?' (Size = 15), @p2='?' (Size = 84), @p3='?' (Size = 12), @p4='?' (Size = 36), @p16='?' (Size = 36), @p5='?' (Size = 8), @p6='?' (Size = 13), @p7='?', @p8='?', @p9='?' (Size = 188), @p10='?', @p11='?', @p12='?' (Size = 38), @p13='?', @p14='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictApplications" SET "ApplicationType" = @p0, "ClientId" = @p1, "ClientSecret" = @p2, "ClientType" = @p3, "ConcurrencyToken" = @p4, "ConsentType" = @p5, "DisplayName" = @p6, "DisplayNames" = @p7, "JsonWebKeySet" = @p8, "Permissions" = @p9, "PostLogoutRedirectUris" = @p10, "Properties" = @p11, "RedirectUris" = @p12, "Requirements" = @p13, "Settings" = @p14
WHERE "Id" = @p15 AND "ConcurrencyToken" = @p16
RETURNING 1;
2026-01-21 15:59:29.624 +03:00 [INF] Database seeded successfully
2026-01-21 15:59:29.636 +03:00 [INF] User profile is available. Using '/Users/furkanturkyilmaz/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-21 15:59:29.883 +03:00 [INF] Now listening on: https://localhost:57679
2026-01-21 15:59:29.884 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-21 15:59:29.884 +03:00 [INF] Hosting environment: Development
2026-01-21 15:59:29.885 +03:00 [INF] Content root path: /Users/furkanturkyilmaz/Documents/openiddict-dotnet-core-custom-identity-server/src/ShoppingProject.Web
2026-01-21 15:59:30.126 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/index.html - null null
2026-01-21 15:59:30.217 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/index.html - 200 null text/html;charset=utf-8 90.9861ms
2026-01-21 15:59:31.463 +03:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2026-01-21 15:59:31.565 +03:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 102.4552ms
2026-01-21 15:59:34.655 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:57679/api/v1/user-roles - null null
2026-01-21 15:59:34.745 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 44)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationId", "o"."AuthorizationId", "o"."ConcurrencyToken", "o"."CreationDate", "o"."ExpirationDate", "o"."Payload", "o"."Properties", "o"."RedemptionDate", "o"."ReferenceId", "o"."Status", "o"."Subject", "o"."Type", "o0"."Id", "o0"."ApplicationType", "o0"."ClientId", "o0"."ClientSecret", "o0"."ClientType", "o0"."ConcurrencyToken", "o0"."ConsentType", "o0"."DisplayName", "o0"."DisplayNames", "o0"."JsonWebKeySet", "o0"."Permissions", "o0"."PostLogoutRedirectUris", "o0"."Properties", "o0"."RedirectUris", "o0"."Requirements", "o0"."Settings", "o1"."Id", "o1"."ApplicationId", "o1"."ConcurrencyToken", "o1"."CreationDate", "o1"."Properties", "o1"."Scopes", "o1"."Status", "o1"."Subject", "o1"."Type"
FROM "OpenIddictTokens" AS "o"
LEFT JOIN "OpenIddictApplications" AS "o0" ON "o"."ApplicationId" = "o0"."Id"
LEFT JOIN "OpenIddictAuthorizations" AS "o1" ON "o"."AuthorizationId" = "o1"."Id"
WHERE "o"."ReferenceId" = @identifier
LIMIT 1
2026-01-21 15:59:34.853 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2026-01-21 15:59:34.864 +03:00 [INF] The response was successfully returned as a challenge response: {
  "error": "insufficient_access",
  "error_description": "The user represented by the token is not allowed to perform the requested action.",
  "error_uri": "https://documentation.openiddict.com/errors/ID2095"
}.
2026-01-21 15:59:34.867 +03:00 [INF] AuthenticationScheme: OpenIddict.Validation.AspNetCore was forbidden.
2026-01-21 15:59:34.869 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:57679/api/v1/user-roles - 403 0 null 214.6042ms
2026-01-21 15:59:37.649 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:57679/connect/token - application/x-www-form-urlencoded 165
2026-01-21 15:59:37.651 +03:00 [INF] The request URI matched a server endpoint: "Token".
2026-01-21 15:59:37.664 +03:00 [INF] The token request was successfully extracted: {
  "grant_type": "password",
  "username": "admin@test.com",
  "password": "[redacted]",
  "client_id": "shopping-admin",
  "client_secret": "[redacted]",
  "scope": "api openid profile offline_access"
}.
2026-01-21 15:59:37.705 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p1='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @p1
2026-01-21 15:59:37.714 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 14)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 15:59:37.730 +03:00 [INF] The token request was successfully validated.
2026-01-21 15:59:37.740 +03:00 [INF] Handling LoginCommand
2026-01-21 15:59:37.741 +03:00 [INF] Property Email : admin@test.com
2026-01-21 15:59:37.741 +03:00 [INF] Property Password : Password123!
2026-01-21 15:59:37.750 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@email='?' (Size = 14)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."CreatedDate", "u"."DisplayName", "u"."Email", "u"."IsActive", "u"."IsDeleted", "u"."PasswordHash", "u"."UpdatedAt", "u"."UpdatedDate", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Email" = @email
LIMIT 1
2026-01-21 16:05:14.968 +03:00 [INF] Handled LoginCommand with LoginResultDto { UserId = b4b209ef-5e37-4cae-adab-37aa222297fa, UserName = admin, Email = admin@test.com, Roles = System.Collections.Generic.List`1[System.String] } in 337223 ms
2026-01-21 16:05:14.975 +03:00 [INF] Login result: {"UserId":"b4b209ef-5e37-4cae-adab-37aa222297fa","UserName":"admin","Email":"admin@test.com","Roles":[],"$type":"LoginResultDto"}
2026-01-21 16:05:14.979 +03:00 [INF] User admin logged in with roles: 
2026-01-21 16:05:15.022 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?' (Size = 36), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 51), @p6='?' (Size = 5), @p7='?' (Size = 36), @p8='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictAuthorizations" ("Id", "ApplicationId", "ConcurrencyToken", "CreationDate", "Properties", "Scopes", "Status", "Subject", "Type")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-21 16:05:15.026 +03:00 [INF] An ad hoc authorization was automatically created and associated with the 'shopping-admin' application: 30c3114c-96e3-4706-b30f-47d142406643.
2026-01-21 16:05:15.048 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?' (Size = 36), @p3='?' (Size = 36), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (Size = 5), @p11='?' (Size = 36), @p12='?' (Size = 45)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictTokens" ("Id", "ApplicationId", "AuthorizationId", "ConcurrencyToken", "CreationDate", "ExpirationDate", "Payload", "Properties", "RedemptionDate", "ReferenceId", "Status", "Subject", "Type")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2026-01-21 16:05:15.089 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p12='?' (Size = 36), @p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?' (Size = 36), @p13='?' (Size = 36), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (Size = 1974), @p6='?', @p7='?' (DbType = DateTime), @p8='?' (Size = 44), @p9='?' (Size = 5), @p10='?' (Size = 36), @p11='?' (Size = 45)], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictTokens" SET "ApplicationId" = @p0, "AuthorizationId" = @p1, "ConcurrencyToken" = @p2, "CreationDate" = @p3, "ExpirationDate" = @p4, "Payload" = @p5, "Properties" = @p6, "RedemptionDate" = @p7, "ReferenceId" = @p8, "Status" = @p9, "Subject" = @p10, "Type" = @p11
WHERE "Id" = @p12 AND "ConcurrencyToken" = @p13
RETURNING 1;
2026-01-21 16:05:15.092 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?' (Size = 36), @p3='?' (Size = 36), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (Size = 5), @p11='?' (Size = 36), @p12='?' (Size = 46)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictTokens" ("Id", "ApplicationId", "AuthorizationId", "ConcurrencyToken", "CreationDate", "ExpirationDate", "Payload", "Properties", "RedemptionDate", "ReferenceId", "Status", "Subject", "Type")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2026-01-21 16:05:15.120 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (Size = 36), @p2='?' (Size = 36), @p3='?' (Size = 36), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (Size = 5), @p11='?' (Size = 36), @p12='?' (Size = 41)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OpenIddictTokens" ("Id", "ApplicationId", "AuthorizationId", "ConcurrencyToken", "CreationDate", "ExpirationDate", "Payload", "Properties", "RedemptionDate", "ReferenceId", "Status", "Subject", "Type")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2026-01-21 16:05:15.140 +03:00 [INF] The response was successfully returned as a JSON document: {
  "access_token": "[redacted]",
  "token_type": "Bearer",
  "expires_in": 3600,
  "scope": "openid email profile offline_access api",
  "id_token": "[redacted]",
  "refresh_token": "[redacted]"
}.
2026-01-21 16:05:15.142 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:57679/connect/token - 200 3260 application/json;charset=UTF-8 337492.4419ms
2026-01-21 18:48:59.328 +03:00 [INF] Applying database migrations...
2026-01-21 18:48:59.743 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2026-01-21 18:48:59.760 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsLock' AND "type" = 'table';
2026-01-21 18:48:59.763 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT OR IGNORE INTO "__EFMigrationsLock"("Id", "Timestamp") VALUES(1, '2026-01-21 15:48:59.762786+00:00');
SELECT changes();
2026-01-21 18:48:59.789 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2026-01-21 18:48:59.795 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2026-01-21 18:48:59.797 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2026-01-21 18:48:59.800 +03:00 [INF] No migrations were applied. The database is already up to date.
2026-01-21 18:48:59.801 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "__EFMigrationsLock";
2026-01-21 18:48:59.802 +03:00 [INF] Database migrations applied successfully
2026-01-21 18:48:59.803 +03:00 [INF] Seeding database...
2026-01-21 18:48:59.907 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u")
2026-01-21 18:48:59.927 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id"
FROM "Users" AS "u"
WHERE "u"."UserName" = 'admin'
LIMIT 1
2026-01-21 18:48:59.931 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clients" AS "c")
2026-01-21 18:48:59.932 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Scopes" AS "s")
2026-01-21 18:48:59.933 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Roles" AS "r")
2026-01-21 18:48:59.965 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@name='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 18:48:59.996 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 14)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 18:49:00.009 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id"
FROM "Roles" AS "r"
WHERE "r"."Name" = 'Admin'
LIMIT 1
2026-01-21 18:49:00.012 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@adminUserId='?' (DbType = Guid), @adminRoleId='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "UserRoles" AS "u"
    WHERE "u"."UserId" = @adminUserId AND "u"."RoleId" = @adminRoleId AND NOT ("u"."IsDeleted"))
2026-01-21 18:49:00.045 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@name='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 18:49:00.073 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p8='?' (Size = 36), @p0='?' (Size = 36), @p9='?' (Size = 36), @p1='?', @p2='?', @p3='?' (Size = 17), @p4='?', @p5='?' (Size = 9), @p6='?', @p7='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictScopes" SET "ConcurrencyToken" = @p0, "Description" = @p1, "Descriptions" = @p2, "DisplayName" = @p3, "DisplayNames" = @p4, "Name" = @p5, "Properties" = @p6, "Resources" = @p7
WHERE "Id" = @p8 AND "ConcurrencyToken" = @p9
RETURNING 1;
2026-01-21 18:49:00.076 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@name='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ConcurrencyToken", "o"."Description", "o"."Descriptions", "o"."DisplayName", "o"."DisplayNames", "o"."Name", "o"."Properties", "o"."Resources"
FROM "OpenIddictScopes" AS "o"
WHERE "o"."Name" = @name
LIMIT 1
2026-01-21 18:49:00.077 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p8='?' (Size = 36), @p0='?' (Size = 36), @p9='?' (Size = 36), @p1='?', @p2='?', @p3='?' (Size = 14), @p4='?', @p5='?' (Size = 7), @p6='?', @p7='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictScopes" SET "ConcurrencyToken" = @p0, "Description" = @p1, "Descriptions" = @p2, "DisplayName" = @p3, "DisplayNames" = @p4, "Name" = @p5, "Properties" = @p6, "Resources" = @p7
WHERE "Id" = @p8 AND "ConcurrencyToken" = @p9
RETURNING 1;
2026-01-21 18:49:00.079 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 18:49:00.094 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p15='?' (Size = 36), @p0='?', @p1='?' (Size = 11), @p2='?' (Size = 84), @p3='?' (Size = 12), @p4='?' (Size = 36), @p16='?' (Size = 36), @p5='?' (Size = 8), @p6='?' (Size = 9), @p7='?', @p8='?', @p9='?' (Size = 190), @p10='?', @p11='?', @p12='?' (Size = 55), @p13='?', @p14='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictApplications" SET "ApplicationType" = @p0, "ClientId" = @p1, "ClientSecret" = @p2, "ClientType" = @p3, "ConcurrencyToken" = @p4, "ConsentType" = @p5, "DisplayName" = @p6, "DisplayNames" = @p7, "JsonWebKeySet" = @p8, "Permissions" = @p9, "PostLogoutRedirectUris" = @p10, "Properties" = @p11, "RedirectUris" = @p12, "Requirements" = @p13, "Settings" = @p14
WHERE "Id" = @p15 AND "ConcurrencyToken" = @p16
RETURNING 1;
2026-01-21 18:49:00.095 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@identifier='?' (Size = 15)], CommandType='"Text"', CommandTimeout='30']
SELECT "o"."Id", "o"."ApplicationType", "o"."ClientId", "o"."ClientSecret", "o"."ClientType", "o"."ConcurrencyToken", "o"."ConsentType", "o"."DisplayName", "o"."DisplayNames", "o"."JsonWebKeySet", "o"."Permissions", "o"."PostLogoutRedirectUris", "o"."Properties", "o"."RedirectUris", "o"."Requirements", "o"."Settings"
FROM "OpenIddictApplications" AS "o"
WHERE "o"."ClientId" = @identifier
LIMIT 1
2026-01-21 18:49:00.097 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p15='?' (Size = 36), @p0='?', @p1='?' (Size = 15), @p2='?' (Size = 84), @p3='?' (Size = 12), @p4='?' (Size = 36), @p16='?' (Size = 36), @p5='?' (Size = 8), @p6='?' (Size = 13), @p7='?', @p8='?', @p9='?' (Size = 188), @p10='?', @p11='?', @p12='?' (Size = 38), @p13='?', @p14='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "OpenIddictApplications" SET "ApplicationType" = @p0, "ClientId" = @p1, "ClientSecret" = @p2, "ClientType" = @p3, "ConcurrencyToken" = @p4, "ConsentType" = @p5, "DisplayName" = @p6, "DisplayNames" = @p7, "JsonWebKeySet" = @p8, "Permissions" = @p9, "PostLogoutRedirectUris" = @p10, "Properties" = @p11, "RedirectUris" = @p12, "Requirements" = @p13, "Settings" = @p14
WHERE "Id" = @p15 AND "ConcurrencyToken" = @p16
RETURNING 1;
2026-01-21 18:49:00.098 +03:00 [INF] Database seeded successfully
2026-01-21 18:49:00.104 +03:00 [INF] User profile is available. Using '/Users/furkanturkyilmaz/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2026-01-21 18:49:00.314 +03:00 [INF] Now listening on: https://localhost:57679
2026-01-21 18:49:00.315 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-21 18:49:00.315 +03:00 [INF] Hosting environment: Development
2026-01-21 18:49:00.315 +03:00 [INF] Content root path: /Users/furkanturkyilmaz/Documents/openiddict-dotnet-core-custom-identity-server/src/ShoppingProject.Web
